<!-- practices/test-store-step4.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Test Store Step 4</title>
</head>
<body>
  <h1>Test Action Creators</h1>
  <button id="addBtn">Dispatch Add Task</button>
  <pre id="output"></pre>
  
  <script type="module">
    import { Store } from '../assets/js/store-step3.js';
    import { actions } from '../assets/js/store-step4.js';
    import { todoReducer } from '../assets/js/store-step2.js';

    // Khởi tạo Store
    const initialState = {
      tasks: [],
      filter: 'all',
      loading: false,
      error: null
    };

    const store = new Store(todoReducer, initialState);

    store.subscribe(state => {
      document.getElementById('output').textContent = JSON.stringify(state, null, 2);
    });

    document.getElementById('addBtn').onclick = () => {
      const newTask = { id: Date.now(), title: 'Created via Action Creator' };
      store.dispatch(actions.addTask(newTask));
    };
  </script>
</body>
</html>
