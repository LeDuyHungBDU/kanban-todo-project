<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"><title>Test Store Step 3</title></head>
<body>
  <h1>Test Store Class</h1>
  <button id="addBtn">Add Task</button>
  <button id="deleteBtn">Delete Task</button>
  <pre id="output"></pre>
  <script type="module">
    import { ActionTypes } from '../assets/js/store-step1.js';
    import { todoReducer } from '../assets/js/store-step2.js';
    import { Store } from '../assets/js/store-step3.js';

    const store = new Store(todoReducer, { tasks: [], filter: 'all', loading: false });
    store.subscribe(state => {
      document.getElementById('output').textContent = JSON.stringify(state, null, 2);
    });

    let taskId = 1;
    document.getElementById('addBtn').onclick = () => {
      store.dispatch({ type: ActionTypes.ADD_TASK, payload: { id: taskId++, title: `Task ${taskId}` } });
    };
    document.getElementById('deleteBtn').onclick = () => {
      const currentState = store.getState();
      if (currentState.tasks.length > 0) {
        store.dispatch({ type: ActionTypes.DELETE_TASK, payload: currentState.tasks[0].id });
      }
    };
  </script>
</body>
</html>
